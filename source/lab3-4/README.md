<center><font size=8 face="楷体">基于UDP服务设计可靠传输协议并编程实现</font></center>

<center><font size=5 face="楷体">第四次实验报告</font></center>

<center><font face="楷体">1811379 李毅</font></center>

<center><font face="楷体">日期：2020年12月25日</font></center>

# 目录

[TOC]

<h2><center>摘要</center></h2>

​			本实验主要对之前实现的实验进行性能对比测试，以便了解不同参数、策略下代码的性能。

**关键字：**UDP，可靠传输，停等，滑动窗口，RENO拥塞控制，性能对比



## 一、引言

### （1）实验环境

+ os： windows10
+ c++11
+ mingw

### （2）实验实现思路

在本机上同时运行服务器端和客户端的可执行代码，服务器端发送文件，接收端接收文件，测试文件也同样在本机运行。

### （3）实验完成情况
实验中要求的三项
+ 停等机制与滑动窗口机制性能对比
+ 滑动窗口机制中不同窗口大小对性能的影响
+ 有拥塞控制和无拥塞控制的性能比较

实验要求中的3项对比，合并为2项对比项目，并新添滑动窗口和拥塞控制对于不同文件大小的传输对比，拥塞控制不同阈值大小对性能的影响。

因为滑动窗口大小为1时即为停等机制

+ 停等与滑动窗口不同窗口大小滑窗（GBN）的性能对比
+ 停等，无拥塞控制，用拥塞控制（RENO算法）的性能对比
+ 滑动窗口和拥塞控制对于不同大小文件的传输对比
+ 拥塞控制不同阈值大小对性能的影响

## 二、测试过程结果及分析

### （一）、停等与滑动窗口不同窗口大小的性能对比

#### 测试条件

传输机制：停等

滑动窗口算法：GBN

在多种不同的窗口大小,丢包率,时延之间进行比较

timeout均为0.5ms

拥塞控制：无

发送文件：helloworld.txt(1.57MB)

#### 测试指标

吞吐率

#### 测试方法

对传输较快的，采样3次，取平均值。对于传输缓慢的，仅采样一次

#### 测试结果

时延：无

![image-20201226154510865](E:\Typora\imgs\image-20201226154510865.png)



丢包率：1%

![image-20201226154711984](E:\Typora\imgs\image-20201226154711984.png)

#### 结果分析

排除个别因电脑程序运行，以及传输的等问题的失真数据

总体趋势是，

+ 窗口越大，吞吐率越大，传输速率越快

+ 丢包率和时延越小，吞吐率越小，传输速率越慢

其他情况，值得注意的是

+ 在同一丢包率和时延条件下，当窗口增长到一定大小时，其可能带来的性能的增长减小，甚至是性能的降低。可能原因是由于GBN策略，窗口增大将导致重发包量增大，拖慢性能，重复发送率将大幅上升。



### （二）、停等，无拥塞控制，用拥塞控制（RENO算法）的性能对比

#### 测试条件

传输机制：停等

滑动窗口算法：GBN，窗口大小为20

拥塞控制：RENO，阈值20

timeout均为0.5ms

无时延，丢包率为5%

发送文件：helloworld.txt(1.57MB)

#### 测试指标

吞吐率

#### 测试方法

测试3次，取平均值

#### 测试结果

![image-20201226160309905](E:\Typora\imgs\image-20201226160309905.png)

#### 结果分析

因为拥塞控制的阈值为20和滑动窗口的大小相同，所以对于在丢包的情况下，滑动窗口一定程度上要好于拥塞控制，停等在丢包的情况下，没有其他两种策略吞吐率高

### （三）、滑动窗口和拥塞控制对于不同大小文件的传输对比

#### 测试条件

传输机制：停等

滑动窗口算法：GBN，窗口大小为20

拥塞控制：RENO，阈值20

timeout均为0.5ms

无时延，丢包率为5%

#### 测试指标

吞吐率

#### 测试方法

测试3次，取平均值

#### 测试结果

![image-20201226162442447](E:\Typora\imgs\image-20201226162442447.png)

#### 结果分析

总体上看，在丢包的情况下，滑动窗口在发送不同大小文件上表现得较为稳定，而拥塞控制算法，可能是因为在传输大文件时因为丢包，窗口大小处于较小状态，传输速度有所下降。（排除其他网络等不稳定因素）。

因为拥塞控制算法得阈值为20与滑动窗口大小相同，所以一定程度上拥塞控制算法的传输效率没有滑动窗口大。

### （四）、拥塞控制不同阈值大小对性能的影响

#### 测试条件

拥塞控制：RENO

timeout均为0.5ms

无时延，丢包率为1%

发送文件：helloworld.txt(1.57MB)

#### 测试指标

吞吐率

#### 测试方法

测试3次，取平均值

#### 测试结果

![image-20201226165744090](E:\Typora\imgs\image-20201226165744090.png)

#### 结果分析

总体上看，在丢包的情况下，拥塞控制随着SSH的增大吞吐率却在降低，有点诡异。猜测是因为，我在接收端设置的收到发送端发来的包之后等待500ms，继续接收包，并在之后发送的最大的ack，来实现的累计确认。而且接受端并没有做对于接收的包做乱序缓存，导致如果不是期望的包就会被丢弃。在这两种情况下导致了，发送端窗口大小增加的速度反而降低了。

## 总结

本实验的实验结果一定程度说明了拥塞控制可以在一定状况下提高传输速率，并减轻网络负担。并且GBN在许多性能上优于停等，但窗口过大将造成过多重传，理论上可以采用SR算法解决。GBN以及拥塞控制算法之间受SSH，滑动窗口大小，丢包率等因素影响，可以适用于不同的情况，没有一定的高低之分。

> 注：本实验的结果显然受制于网络，本机性能，测试次数等，仅供最基本的分析以及参考

